PACKAGE_NAME=hello
PACKAGE_DESCRIPTION=GNU hello - a program that produces a familiar, friendly greeting.
PACKAGE_VERSION=2.12
PACKAGE_MAINTAINERS=Kevin Alavik <kevin@alavik.se>

configure() {
    SOURCE_URL=https://mirror.bahnhof.net/pub/gnu/hello/hello-${PACKAGE_VERSION}.tar.gz
    SOURCE_ARCHIVE=hello-${PACKAGE_VERSION}.tar.gz
    SOURCE_DIR=hello-${PACKAGE_VERSION}
    [ ! -f "$SOURCE_ARCHIVE" ] && curl -LO "$SOURCE_URL" || { echo "Failed to download source"; exit 1; }
    [ ! -d "$SOURCE_DIR" ] && tar -xf "$SOURCE_ARCHIVE" || { echo "Failed to extract source"; exit 1; }
    cd "$SOURCE_DIR" || { echo "Failed to enter source directory"; exit 1; }
    ./configure --prefix=$PREFIX || { echo "Configure failed"; exit 1; }
}

build() {
    make || { echo "Build failed"; exit 1; }
}

test() {
    make check || { echo "Tests failed"; exit 1; }
}

install() {
    make install || { echo "Install failed"; exit 1; }
}

uninstall() {
    rm -f $PREFIX/bin/hello
    rm -f $PREFIX/share/info/hello.info
    rm -f $PREFIX/share/man/man1/hello.1
    rm -rf $PREFIX/share/doc/hello
    rm -f $PREFIX/share/locale/*/LC_MESSAGES/hello.mo
}

post_install() {
}
